(function(){"use strict";var e={35984:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(51527),a=(n(50812),n(74525)),o=(n(38857),n(59241),n(61482),n(55191)),u=(n(55094),n(71831)),l=(0,u._)("span",null,"Заявки",-1),i=(0,u._)("span",null,"Администрирование",-1),c=(0,u.Uk)(" Исполнители "),d=(0,u.Uk)(" Типовые работы "),s=(0,u.Uk)(" Типовые неисправности "),f=(0,u.Uk)(" Кабинеты "),m=(0,u.Uk)(" Срочности "),p=(0,u.Uk)(" Администраторы ");function v(e,t,n,v,h,w){var b=(0,u.up)("message-box"),g=o.gn,_=a.E_,y=(0,u.up)("setting"),k=(0,u.up)("user"),W=(0,u.up)("check"),V=(0,u.up)("help"),U=(0,u.up)("office-building"),F=(0,u.up)("ic-view"),x=(0,u.up)("service"),D=a.F8,S=a.Q8,C=r.zd;return(0,u.wg)(),(0,u.j4)(C,{"model-value":n.modelValue,title:"Меню","lock-scroll":"",direction:"ltr",size:v.size,onClosed:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",!1)})},{default:(0,u.w5)((function(){return[(0,u.Wm)(S,{"default-active":v.activeMenu,style:{"margin-left":"-1.25rem","margin-right":"-1.25rem"},onSelect:v.handleSelect},{default:(0,u.w5)((function(){return[(0,u.Wm)(_,{index:"/dashboard"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(b)]})),_:1}),l]})),_:1}),(0,u.Wm)(D,{index:"/dashboard/controls"},{title:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(y)]})),_:1}),i]})),default:(0,u.w5)((function(){return[(0,u.Wm)(_,{index:"/dashboard/controls#masters"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(k)]})),_:1}),c]})),_:1}),(0,u.Wm)(_,{index:"/dashboard/controls#common_works"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(W)]})),_:1}),d]})),_:1}),(0,u.Wm)(_,{index:"/dashboard/controls#common_defects"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(V)]})),_:1}),s]})),_:1}),(0,u.Wm)(_,{index:"/dashboard/controls#cabinets"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(U)]})),_:1}),f]})),_:1}),(0,u.Wm)(_,{index:"/dashboard/controls#urgency"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(F)]})),_:1}),m]})),_:1}),(0,u.Wm)(_,{index:"/dashboard/controls#administrators"},{default:(0,u.w5)((function(){return[(0,u.Wm)(g,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(x)]})),_:1}),p]})),_:1})]})),_:1})]})),_:1},8,["default-active","onSelect"])]})),_:1},8,["model-value","size"])}var h=n(31222),w=n(66253),b=n(77758),g=n(34149),_=n(86447),y=n(84935),k=n(68699),W=n(68708),V=n(74559),U=n(10571),F={components:{MessageBox:b.Z,Setting:g.Z,User:_.Z,Service:y.Z,IcView:k.Z,Help:W.Z,Check:V.Z,OfficeBuilding:U.Z},props:{modelValue:{type:Boolean,required:!0}},setup:function(){var e=(0,w.tv)(),t=(0,h.iH)(""),n=(0,u.Fl)((function(){return e.currentRoute.value.path+e.currentRoute.value.hash}));(0,u.YP)(n,(function(){t.value=n.value}));var r=function(t){e.push(t)},a=(0,h.iH)("20%"),o=function(){window.innerWidth<=600?a.value="100%":window.innerWidth<=850?a.value="40%":window.innerWidth<=1100?a.value="30%":a.value="20%"};return(0,u.bv)((function(){window.addEventListener("resize",o),o(),t.value=e.currentRoute.value.fullPath})),{handleSelect:r,size:a,activeMenu:t}}},x=n(12505);const D=(0,x.Z)(F,[["render",v]]);var S=D},8507:function(e,t,n){n(20750),n(56639),n(48803),n(5967);var r=n(92847),a=n(71831);function o(e,t){var n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var u=n(12505);const l={},i=(0,u.Z)(l,[["render",o]]);var c=i,d=n(44266),s=(n(77410),n(49966),n(97244),n(776),n(66253)),f=n(59569),m=n(90433),p=(n(12275),n(95906),n(55568)),v=(n(98684),n(36150)),h=(n(57559),n(76641),n(89653),n(49517),n(19903)),w=(n(97258),n(47698)),b=(n(23075),n(51527)),g=(n(50812),n(70361)),_=(n(95155),n(82799)),y=(n(73047),n(43415)),k=(n(25339),n(2914),n(26923)),W=(0,a._)("br",null,null,-1),V=(0,a.Uk)("Отмена"),U=(0,a.Uk)("Создать"),F=(0,a.Uk)(" Меню "),x=(0,a._)("h2",null,"Заявки на ремонт",-1),D=(0,a._)("h3",{style:{margin:"0","margin-right":"1rem"}},"Фильтрация",-1),S={key:0,style:{"margin-top":"0.5rem"}},C={style:{position:"absolute",right:"1rem",top:"1rem"}},j={style:{color:"#606266","margin-top":"1.5rem"}},O=(0,a.Uk)(" Создать отчет ");function T(e,t,n,r,o,u){var l=y.OX,i=_.dq,c=g.mi,d=b.zd,s=(0,a.up)("base-menu"),f=(0,a.up)("dashboard-filter-form"),T=w.vs,H=h.i1,Z=m.nZ,R=(0,a.up)("dashboard-table"),q=m.b2,z=v.BT,P=v.km,E=p.R,A=m.F_,Y=m.G4;return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{modelValue:r.reportDrawer,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.reportDrawer=e}),direction:"rtl","lock-scroll":"",title:"Выберите поля для отчета",size:"false"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.created_at,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.reportForm.created_at=e}),"active-text":"Создано в"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.defects,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.reportForm.defects=e}),"active-text":"Неисправности"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.cabinet,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.reportForm.cabinet=e}),"active-text":"Кабинет"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.done_at,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.reportForm.done_at=e}),"active-text":"Выполнено в"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.technician,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.reportForm.technician=e}),"active-text":"Исполнитель"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.status,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.reportForm.status=e}),"active-text":"Cтатус"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.performed_works,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.reportForm.performed_works=e}),"active-text":"Проделанные работы"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.client,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.reportForm.client=e}),"active-text":"Ф.И.О. Заказчика"},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:r.reportForm.client_phone,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.reportForm.client_phone=e}),"active-text":"Телефон заказчика"},null,8,["modelValue"])]})),_:1}),W,(0,a.Wm)(c,{onClick:t[9]||(t[9]=function(e){return r.reportDrawer=!1})},{default:(0,a.w5)((function(){return[V]})),_:1}),(0,a.Wm)(c,{type:"primary",onClick:t[10]||(t[10]=function(e){return r.getReport()})},{default:(0,a.w5)((function(){return[U]})),_:1})]})),_:1},8,["modelValue"]),(0,a.Wm)(Y,{style:{height:"100vh"}},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{style:{"background-color":"white"}},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{modelValue:r.drawer,"onUpdate:modelValue":t[12]||(t[12]=function(e){return r.drawer=e})},null,8,["modelValue"]),(0,a.Wm)(Z,{height:"auto"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{onClick:r.toggleDrawer,type:"text",icon:r.Menu,size:"large",style:{"margin-right":"1rem","margin-top":"0.9rem"}},{default:(0,a.w5)((function(){return[F]})),_:1},8,["onClick","icon"]),x,(0,a.Wm)(c,{size:"large",icon:r.RefreshRight,type:"text",style:{"margin-left":"0.5rem","margin-top":"1rem"},onClick:t[13]||(t[13]=function(e){return r.toggleUpdate()})},null,8,["icon"])]})),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((function(){return[D,(0,a.Wm)(l,{style:{"margin-top":"-0.25rem"},modelValue:r.filter,"onUpdate:modelValue":t[14]||(t[14]=function(e){return r.filter=e})},null,8,["modelValue"])]})),_:1}),r.filter?((0,a.wg)(),(0,a.iD)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.filterCount,(function(e){return(0,a.wg)(),(0,a.j4)(i,{key:e},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{id:e,onFilter:r.handleFilter,onError:r.handleError},null,8,["id","onFilter","onError"])]})),_:2},1024)})),128))])):(0,a.kq)("",!0),(0,a._)("div",C,[(0,a.Wm)(H,{"confirm-button-text":"Да","cancel-button-text":"Нет",title:"Вы уверены, что хотите выйти?",onConfirm:r.logout},{reference:(0,a.w5)((function(){return[(0,a.Wm)(T,{icon:r.UserFilled},null,8,["icon"])]})),_:1},8,["onConfirm"])])]})),_:1}),(0,a.Wm)(q,{style:{padding:"0"}},{default:(0,a.w5)((function(){return[(0,a.Wm)(R,{update:r.update},null,8,["update"])]})),_:1}),(0,a.Wm)(A,{height:"4rem"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{style:{"margin-left":"auto","margin-right":"0"}},{default:(0,a.w5)((function(){return[(0,a._)("span",j," Всего: "+(0,k.zw)(r.totalRows)+" На странице: ",1),(0,a.Wm)(P,{modelValue:r.pageSize,"onUpdate:modelValue":t[15]||(t[15]=function(e){return r.pageSize=e}),style:{margin:"0 0.5rem","margin-top":"1.125rem",width:"8ch"}},{default:(0,a.w5)((function(){return[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)([10,20,50,100],(function(e){return(0,a.Wm)(z,{key:e,label:e,value:e},null,8,["label","value"])})),64))]})),_:1},8,["modelValue"]),(0,a.Wm)(E,{currentPage:r.currentPage,"onUpdate:currentPage":t[16]||(t[16]=function(e){return r.currentPage=e}),"page-size":r.pageSize,"onUpdate:page-size":t[17]||(t[17]=function(e){return r.pageSize=e}),background:"",layout:"prev, pager, next",total:r.totalRows,style:{"margin-top":"1rem"}},null,8,["currentPage","page-size","total"]),(0,a.Wm)(c,{type:"primary",style:{margin:"0 0.5rem","margin-top":"1.125rem"},onClick:t[18]||(t[18]=function(e){return r.toggleReportDrawer()})},{default:(0,a.w5)((function(){return[O]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})],64)}n(212),n(31599),n(44692),n(5037),n(36849);var H=n(31222),Z=n(85050),R=n(50701),q=n(4659),z=n(97067),P=(n(84491),n(13540),n(58140)),E=n(18848),A=n(500),Y=n(35984),B=n(55335),I=(n(6458),n(80663)),M=(n(45376),n(64603)),K=(n(32878),n(52993)),N=(n(69853),n(47979),(0,a._)("span",{style:{margin:"0 0.5rem"}},"-",-1)),L=(0,a._)("span",{style:{margin:"0 0.5rem"}},"-",-1),$=(0,a.Uk)("ОК"),J=(0,a.Uk)("Отменить");function G(e,t,n,r,o,u){var l=v.BT,i=v.km,c=B.nH,d=K.i,s=M.EZ,f=I.OF,m=g.mi,p=B.ly;return(0,a.wg)(),(0,a.j4)(p,{inline:"",ref:"formRef",model:r.form},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{label:"По"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:r.form.column,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.form.column=e}),placeholder:"Статус","no-data-text":"Упс! Что-то пошло не так!"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.columns,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),"selectTechnician"!==r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:0,label:"Оператор"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:r.form.operator,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.form.operator=e}),placeholder:r.form.operatorColumns.length>0?r.form.operatorColumns[0].label:" ",disabled:0===r.form.operatorColumns.length,"no-data-text":"Упс!",style:{width:"14ch"}},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.form.operatorColumns,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","disabled"])]})),_:1})):(0,a.kq)("",!0),"selectTechnician"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:1,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:r.form.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.form.value=e}),placeholder:"Петров Петр","no-data-text":"Упс! Что-то пошло не так!"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.technicianOptions,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})):"inputDate"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:2,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{modelValue:r.form.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.form.value=e}),type:"date",placeholder:"Выберите день",shortcuts:r.dateInputShortcuts},null,8,["modelValue","shortcuts"])]})),_:1})):"betweenDate"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:3,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{modelValue:r.form.value,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.form.value=e}),type:"daterange","unlink-panels":"","range-separator":"до","start-placeholder":"Выберите начало","end-placeholder":"Выберите конец",shortcuts:r.dateRangeShortcuts},null,8,["modelValue","shortcuts"])]})),_:1})):"inputStatus"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:4,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:r.form.value,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.form.value=e}),placeholder:r.statusOptions[0].label,"no-data-text":"Упс! Что-то пошло не так!"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.statusOptions,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder"])]})),_:1})):"betweenStatus"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:5,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:r.form.value,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.form.value=e}),placeholder:r.statusOptions[0].label,"no-data-text":"Упс! Что-то пошло не так!"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.statusOptions,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder"]),N,(0,a.Wm)(i,{modelValue:r.form.value2,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.form.value2=e}),placeholder:r.statusOptions[1].label,"no-data-text":"Упс! Что-то пошло не так!"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.statusOptions,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder"])]})),_:1})):"between"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:6,label:"Значения"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{modelValue:r.form.value,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.form.value=e}),placeholder:"Пожалуйста, введите значение",clearable:"",style:{width:"35ch"}},null,8,["modelValue"]),L,(0,a.Wm)(s,{modelValue:r.form.value2,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.form.value2=e}),placeholder:"Пожалуйста, введите значение",clearable:"",style:{width:"35ch"}},null,8,["modelValue"])]})),_:1})):"input"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:7,label:"Значение"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{modelValue:r.form.value,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.form.value=e}),placeholder:"Пожалуйста, введите значение",clearable:"",style:{width:"60ch"}},null,8,["modelValue"])]})),_:1})):"containsWorks"===r.valueInput?((0,a.wg)(),(0,a.j4)(c,{key:8,label:"Значения"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{modelValue:r.form.value,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.form.value=e}),placeholder:"Пожалуйста, выберите значения",options:r.containsOptions,multiple:"","allow-create":"",filterable:"",clearable:"","no-data-text":"Упс! Что-то пошло не так!",style:{width:"60ch"}},null,8,["modelValue","options"])]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{type:"primary",onClick:t[12]||(t[12]=function(e){return r.submitForm()}),disabled:r.formNotReady},{default:(0,a.w5)((function(){return[$]})),_:1},8,["disabled"]),(0,a.Wm)(m,{onClick:t[13]||(t[13]=function(e){return r.resetForm()})},{default:(0,a.w5)((function(){return[J]})),_:1})]})),_:1})]})),_:1},8,["model"])}n(35514),n(63831);var Q={props:{id:{type:Number,required:!0}},emits:["filter","error"],setup:function(e,t){var n=t.emit,r=(0,H.iH)(!0),o=(0,H.iH)(null),u=[{label:"Создано в",value:"created_at"},{label:"Выполнено в",value:"done_at"},{label:"Статус",value:"status"},{label:"Кабинет",value:"cabinet"},{label:"Ф.И.О. заказчика",value:"client"},{label:"Неисправности",value:"defects"},{label:"Исполнитель",value:"technician_id"},{label:"Проделанные работы",value:"performed_works"}],l={equals:{label:"=",value:"="},greater:{label:">",value:">"},greaterEquals:{label:">=",value:">="},lower:{label:"<",value:"<"},lowerEquals:{label:"<=",value:"<="},between:{label:"Между",value:"between"},contains:{label:"Содержит",value:"contains"},like:{label:"Похож на",value:"like"}},i=(0,H.iH)(""),c=(0,H.qj)({column:"",operator:"",value:null,value2:null,operatorColumns:[]}),d=[{text:"Сегодня",value:new Date},{text:"Вчера",value:function(){var e=new Date;return e.setTime(e.getTime()-864e5),e}},{text:"Неделю назад",value:function(){var e=new Date;return e.setTime(e.getTime()-6048e5),e}}],s=[{text:"Последняя неделя",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:"Последний месяц",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:"Последние 3 месяца",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}},{text:"Последний год",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-31536e6),[t,e]}}],m=(0,H.iH)([{label:"Просрочено",value:"1:expired"},{label:"< Часа",value:"2:hour"},{label:"< Дня",value:"3:day"},{label:"< недели",value:"4:week"},{label:"> недели",value:"5:none"},{label:"Выполнено",value:"6:completed"}]),p=(0,H.iH)([]),v=function(){f.Z.get("/dashboard/control/technicians").then((function(e){p.value=e.data})).catch((function(){n("error")}))},h=(0,H.iH)([]),w=function(e){f.Z.get("/dashboard/control/".concat(e)).then((function(e){h.value=e.data.map((function(e){return{value:e.label,label:e.label}}))})).catch((function(){n("error")}))};(0,a.YP)((function(){return[c.column,c.operator]}),(function(){if(c.value=null,""===c.column&&""===c.operator)i.value="";else if("technician_id"===c.column)v(),i.value="selectTechnician";else if("performed_works"===c.column&&c.operator)c.value=[],w("works"),i.value="containsWorks";else{switch(c.operator){case"between":i.value="between";break;case"contains":i.value="contains";break;case"=":case">":case">=":case"<":case"<=":case"like":i.value="input";break;default:i.value=""}"created_at"!==c.column&&"done_at"!==c.column||(i.value+="Date"),"status"===c.column&&(i.value+="Status")}})),(0,a.YP)((function(){return[c.value,c.value2]}),(function(){c.column&&c.value&&c.value!==[]?"between"!==i.value&&"betweenStatus"!==i.value||!c.value2?"between"!==i.value&&"betweenStatus"!==i.value&&(r.value=!1):r.value=!1:r.value=!0}));var b=function(){"between"!==i.value&&"betweenStatus"!==i.value||!c.value2?"between"!==i.value&&"betweenStatus"!==i.value&&n("filter",{id:e.id,column:c.column,operator:c.operator,value:c.value}):n("filter",{id:e.id,column:c.column,operator:c.operator,value:[c.value,c.value2]})},g=function(){c.operator="",c.value=null,c.value2=null,r.value=!0},_=function(){g(),c.column="",n("filter",{id:e.id,delete:!0})};return(0,a.YP)((function(){return c.column}),(function(){switch(g(),c.column){case"":case"technician_id":c.operatorColumns=[];break;case"performed_works":c.operatorColumns=[l.equals,l.contains];break;case"defects":case"client":case"cabinet":c.operatorColumns=[l.equals,l.like];break;case"status":c.operatorColumns=[l.equals,l.between];break;case"done_at":default:c.operatorColumns=[l.greater,l.greaterEquals,l.lower,l.lowerEquals,l.between]}})),{formNotReady:r,form:c,formRef:o,columns:u,valueInput:i,dateInputShortcuts:d,dateRangeShortcuts:s,statusOptions:m,technicianOptions:p,containsOptions:h,resetForm:_,submitForm:b}}};const X=(0,u.Z)(Q,[["render",G]]);var ee=X,te=n(82086),ne=(n(26746),n(26096)),re=(n(53631),n(74040)),ae=(n(62762),n(28483),{key:0,style:{"margin-left":"2rem"}}),oe=(0,a._)("h4",null,"Подробности Неисправности:",-1),ue={style:{"margin-right":"2rem"}};function le(e,t,n,r,o,u){var l=(0,a.up)("dashboard-table-form"),i=ne.$Y,c=re.Ks,d=ne.eI,s=te._9;return(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{data:r.tableData,"row-key":function(e){return e._id},style:{width:"100%",padding:"0"},stripe:"","empty-text":"Данные отсутствуют",height:"100%",onSortChange:r.changeSorting},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{type:"expand"},{default:(0,a.w5)((function(e){return[e.row.defect_description?((0,a.wg)(),(0,a.iD)("div",ae,[oe,(0,a._)("div",ue,[(0,a._)("p",null,(0,k.zw)(e.row.defect_description),1)])])):(0,a.kq)("",!0),(0,a.Wm)(l,{prop:e,technicians:r.technicians,commonPerformedWorks:r.commonPerformedWorks,"onSubmit:error":t[0]||(t[0]=function(e){return r.submitError()}),"onSubmit:success":t[1]||(t[1]=function(e){return r.submitSuccess()}),style:{"margin-left":"2rem"}},null,8,["prop","technicians","commonPerformedWorks"])]})),_:1}),(0,a.Wm)(i,{label:"Создано в",prop:"created_at",width:"145",sortable:"custom"}),(0,a.Wm)(i,{label:"Выполнено в",prop:"done_at",width:"145",sortable:"custom"}),(0,a.Wm)(i,{label:"Статус",prop:"status",align:"center",width:"130",sortable:"custom"},{default:(0,a.w5)((function(e){return[(0,a.Wm)(c,{effect:"dark",type:r.getStatusType(e.row.status)},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,k.zw)(r.getStatus(e.row.status)),1)]})),_:2},1032,["type"])]})),_:1}),(0,a.Wm)(i,{label:"Кабинет",prop:"cabinet",width:"180",sortable:"custom"}),(0,a.Wm)(i,{label:"Ф.И.О. заказчика",prop:"client",width:"260",sortable:"custom"}),(0,a.Wm)(i,{label:"Телефон",prop:"client_phone",width:"120"}),(0,a.Wm)(i,{label:"Неисправности",prop:"defects","min-width":"300"})]})),_:1},8,["data","row-key","onSortChange"])),[[s,r.loading]])}n(50098);var ie=(0,a._)("h4",null,"Проделанные работы:",-1),ce=(0,a.Uk)("Сохранить");function de(e,t,n,r,o,u){var l=v.BT,i=v.km,c=B.nH,d=g.mi,s=B.ly;return(0,a.wg)(),(0,a.iD)("div",null,[ie,(0,a.Wm)(s,{ref:"formRef",class:"form","label-position":"top",model:o.form,rules:o.rules,inline:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{label:"Исполнитель",prop:"technician_id"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:o.form.technician_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.form.technician_id=e}),placeholder:"Пожалуйста, выберите исполнителя","no-data-text":"Упс! Что-то пошло не так!",style:{"min-width":"42ch"}},{default:(0,a.w5)((function(){return[o.nilTechnician?((0,a.wg)(),(0,a.j4)(l,{key:0,label:"[Удалено]",value:"00000000-0000-0000-0000-000000000000",disabled:""})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.technicians,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,a.Wm)(c,{label:"Проделанные работы",prop:"performed_works"},{default:(0,a.w5)((function(){return[(0,a.Wm)(i,{modelValue:o.form.performed_works,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.performed_works=e}),placeholder:"Пожалуйста, выберите проделанные работы",multiple:"","allow-create":"",filterable:"",clearable:"","no-data-text":"Упс! Что-то пошло не так!",style:{"min-width":"80ch"}},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.commonPerformedWorks,(function(e){return(0,a.wg)(),(0,a.j4)(l,{key:e.value,label:e.label,value:e.label},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,a.Wm)(c,{label:"ㅤ"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{type:"primary",onClick:t[2]||(t[2]=function(e){return u.submitForm()})},{default:(0,a.w5)((function(){return[ce]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])}n(71209);var se={props:{prop:{type:Object,required:!0},commonPerformedWorks:{type:Array,required:!0},technicians:{type:Array,required:!0}},emits:["submit:error","submit:success"],data:function(){return{nilTechnician:!1,form:{id:this.prop.row._id,technician_id:this.prop.row.technician_id,performed_works:this.prop.row.performed_works},rules:{technician_id:[{required:!0,message:"Пожалуйста, выберите исполнителя",trigger:"change"},{validator:this.validateTechnician,trigger:"change"}],performed_works:[{required:!0,message:"Пожалуйста, укажите проделанные работы",trigger:"blur"}]}}},methods:{sendData:function(){var e=this;f.Z.patch("/dashboard/table",this.form).then((function(){e.$emit("submit:success",e._id)})).catch((function(){e.$emit("submit:error")}))},submitForm:function(){var e=this;this.$refs.formRef.validate((function(t){return!!t&&(e.sendData(),!0)}))},validateTechnician:function(e,t,n){"00000000-0000-0000-0000-000000000000"===t?n(new Error("Пожалуйста, выберите исполнителя")):n()}},watch:{"form.technician_id":function(e){"00000000-0000-0000-0000-000000000000"!==e&&(this.nilTechnician=!1)}},mounted:function(){"00000000-0000-0000-0000-000000000000"===this.form.technician_id&&(this.nilTechnician=!0)}};const fe=(0,u.Z)(se,[["render",de]]);var me=fe,pe={components:{DashboardTableForm:me},props:{update:{type:Boolean,required:!1,default:!1}},setup:function(e){var t=(0,Z.oR)(),n=(0,H.iH)([]),r=(0,H.iH)([]),o=(0,H.iH)([]),u=function(e){switch(e){case"6:completed":return"success";case"1:expired":return"danger";case"2:hour":return"warning";case"3:day":return"";case"4:week":case"5:none":return"info";default:return"info"}},l=function(e){switch(e){case"6:completed":return"Выполнено";case"1:expired":return"Просрочено";case"2:hour":return"< Часа";case"3:day":return"< Дня";case"4:week":return"< недели";case"5:none":return"> недели";default:return"Неизвестно"}},i=function(e){return e<10?"0".concat(e):"".concat(e)},c=function(e){return"".concat(i(e.getFullYear()),"-").concat(i(e.getMonth()+1),"-").concat(i(e.getDate())," ").concat(i(e.getHours()),":").concat(i(e.getMinutes()))},d=function(){for(var e=0;e<o.value.length;e++)o.value[e].created_at=c(new Date(o.value[e].created_at)),o.value[e].done_at&&(o.value[e].done_at=c(new Date(o.value[e].done_at)))},s=(0,H.iH)(!1),m=(0,a.Fl)((function(){return t.getters.optionsAndFilters})),p=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.value=e,f.Z.post("/dashboard/table",m.value).then((function(e){o.value=e.data,d(),s.value=!1})).catch((function(){q.z8.error("Упс! Не удалось загрузить данные!")}))};(0,a.YP)((function(){return e.update}),(function(){return p()})),(0,a.YP)(m,(function(){p()}));var v=(0,a.Fl)((function(){return t.getters.updated}));(0,a.YP)(v,(function(){v.value&&(p(),t.dispatch("unsetUpdated"))}));var h=function(){f.Z.get("/dashboard/control/technicians").then((function(e){n.value=e.data})).catch((function(){q.z8.error("Упс! Не удалось загрузить данные!")}))},w=function(){f.Z.get("/dashboard/control/works").then((function(e){r.value=e.data})).catch((function(){q.z8.error("Упс! Не удалось загрузить данные!")}))},b=function(){q.z8.success("Успешно сохранено"),p()},g=function(){q.z8.error("Упс! Не удалось сохранить данные")},_=function(e){var n=e.prop,r=e.order;t.dispatch("setOptions",{orderBy:n,orderDirection:r})};return(0,a.bv)((function(){p(),h(),w()})),{tableData:o,loading:s,technicians:n,commonPerformedWorks:r,getStatusType:u,getStatus:l,submitSuccess:b,submitError:g,changeSorting:_}}};const ve=(0,u.Z)(pe,[["render",le]]);var he=ve,we={components:{BaseMenu:Y.Z,DashboardFilterForm:ee,DashboardTable:he},setup:function(){var e=(0,Z.oR)(),t=(0,s.tv)(),n=(0,H.iH)(!1),r=(0,H.iH)(1),o=(0,H.iH)(1),u=(0,H.iH)(1),l=(0,H.iH)(50),i=(0,H.iH)(!1),c=function(){i.value=!i.value},d=function(){f.Z.post("/dashboard/table/count",e.getters.filters).then((function(e){o.value=parseInt(e.data.count,10)})).catch((function(){q.z8.error("Упс! Не удалось загрузить страницы!")}))},m=(0,H.iH)(!1),p=function(){m.value=!m.value},v=(0,H.iH)({created_at:!0,defects:!0,cabinet:!0,done_at:!0,technician:!0,status:!0,performed_works:!0,client:!0,client_phone:!0}),h=function(){Object.keys(v.value).some((function(e){return v.value[e]}))?f.Z.get("/dashboard/report",{params:{filters:JSON.stringify(e.getters.optionsAndFilters),columns:JSON.stringify(v.value)},responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","Report.xlsx"),document.body.appendChild(n),n.click()})).catch((function(){q.z8.error("Упс! Не удалось загрузить отчет!")})):q.z8.error("Пожалуйста, укажите хотя бы одно поле")},w=(0,H.iH)(!1),b=function(){d(),w.value=!w.value};(0,a.YP)([u,l],(function(){e.dispatch("setOptions",{limit:l.value,page:u.value})})),(0,a.YP)(n,(function(){if(!n.value){for(var t=1;t<=r.value;t++)e.dispatch("removeFilters",t);d()}r.value=1}));var g=function(){f.Z.post("/dashboard/auth/logout").then((function(){t.push("/dashboard/login")}))},_=function(t){t.delete?(e.dispatch("removeFilters",{id:t.id}),r.value=t.id):(e.dispatch("addFilters",t),r.value=r.value>t.id+1||t.id>7?r.value:t.id+1),d()},y=function(){q.z8.error("Упс! Что-то пошло не так")},k=(0,R.io)("https://mtec-support.herokuapp.com/",{transports:["websocket"]});return k.on("row:new",(function(){e.dispatch("setUpdated"),d(),(0,z.bM)({title:"Новая заявка",message:(0,a.h)("i",{style:"color: teal"},"Появилась новая заявка!")})})),(0,a.Jd)((function(){k.disconnect()})),(0,a.bv)((function(){d()})),{filter:n,filterCount:r,drawer:i,toggleDrawer:c,reportDrawer:m,toggleReportDrawer:p,reportForm:v,getReport:h,update:w,toggleUpdate:b,totalRows:o,currentPage:u,pageSize:l,logout:g,handleFilter:_,handleError:y,UserFilled:P.Z,Menu:E.Z,RefreshRight:A.Z}}};const be=(0,u.Z)(we,[["render",T]]);var ge=be,_e=[{path:"/dashboard",name:"home",component:ge,meta:{requiresAuth:!0}},{path:"/dashboard/login",name:"login",component:function(){return n.e(924).then(n.bind(n,43924))},meta:{requiresAuth:!1}},{path:"/dashboard/register",name:"register",component:function(){return n.e(6).then(n.bind(n,4006))},meta:{requiresAuth:!1}},{path:"/dashboard/controls",name:"controls",component:function(){return n.e(159).then(n.bind(n,26159))},meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"notFound",component:function(){return n.e(938).then(n.bind(n,24938))},meta:{requiresAuth:!1}}],ye=(0,s.p7)({BASE_URL:"/dashboard",history:(0,s.PO)("/"),routes:_e});ye.beforeEach(function(){var e=(0,d.Z)(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Z.get("/dashboard/auth/check");case 3:a=e.sent,!a.data.authorized&&t.meta.requiresAuth?r("/dashboard/login"):r(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),r();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}());var ke=ye,We=(n(7579),(0,Z.MT)({state:{updated:!1,limit:50,page:1,orderBy:"created_at",orderDirection:"desc",filters:[]},getters:{optionsAndFilters:function(e){return{limit:e.limit,page:e.page,orderBy:e.orderBy,orderDirection:e.orderDirection,filters:e.filters}},filters:function(e){return{filters:e.filters}},lastFilter:function(e){var t="";return e.filters.forEach((function(e){t=e.id>t?e.id:t})),t},updated:function(e){return e.updated}},mutations:{setOptions:function(e,t){t.limit||t.page?(t.limit&&(e.limit=t.limit),t.page&&(e.page=t.page)):(t.orderBy?e.orderBy=t.orderBy:e.orderBy="",t.orderDirection?e.orderDirection=t.orderDirection:e.orderDirection="")},setUpdated:function(e,t){e.updated=t},addFilters:function(e,t){e.filters=e.filters.filter((function(e){return e.id!==t.id})),e.filters.push(t)},removeFilters:function(e,t){e.filters=e.filters.filter((function(e){return e.id<t.id}))}},actions:{setOptions:function(e,t){e.commit("setOptions",t)},addFilters:function(e,t){e.commit("addFilters",t)},removeFilters:function(e,t){e.commit("removeFilters",t)},setUpdated:function(e){e.commit("setUpdated",!0)},unsetUpdated:function(e){e.commit("setUpdated",!1)}}}));(0,r.ri)(c).use(We).use(ke).mount("#app")},59569:function(e,t,n){var r=n(1489),a=n.n(r),o="https://mtec-support.herokuapp.com",u=a().create({baseURL:"".concat(o,"/support/api/v1"),headers:{"Content-type":"application/json"},withCredentials:!0});t["Z"]=u}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var u=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],o=e[d][2];for(var l=!0,i=0;i<r.length;i++)(!1&o||u>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(l=!1,o<u&&(u=o));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"-legacy."+{6:"8fa36121",159:"cd618a9e",924:"440d3213",938:"8b1a91b8"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{6:"564ec968",159:"826ed4cf",924:"564ec968",938:"d04ca83a"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="diploma-front:";n.l=function(r,a,o,u){if(e[r])e[r].push(a);else{var l,i;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var s=c[d];if(s.getAttribute("src")==r||s.getAttribute("data-webpack")==t+o){l=s;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+o),l.src=r),e[r]=[a];var f=function(t,n){l.onerror=l.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.j=966}(),function(){n.p="/"}(),function(){var e=function(e,t,n,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var o=function(o){if(a.onerror=a.onload=null,"load"===o.type)n();else{var u=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=u,i.request=l,a.parentNode.removeChild(a),r(i)}};return a.onerror=a.onload=o,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){a=u[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=function(r){return new Promise((function(a,o){var u=n.miniCssF(r),l=n.p+u;if(t(u,l))return a();e(r,l,a,o)}))},a={966:0};n.f.miniCss=function(e,t){var n={6:1,159:1,924:1,938:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={966:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var u=n.p+n.u(t),l=new Error,i=function(r){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+u+")",l.name="ChunkLoadError",l.type=o,l.request=u,a[1](l)}};n.l(u,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,u=r[0],l=r[1],i=r[2],c=0;if(u.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(i)var d=i(n)}for(t&&t(r);c<u.length;c++)o=u[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},r=self["webpackChunkdiploma_front"]=self["webpackChunkdiploma_front"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(8507)}));r=n.O(r)})();
//# sourceMappingURL=dashboard-legacy.fca5072d.js.map